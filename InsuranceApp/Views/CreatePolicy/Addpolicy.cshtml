@model InsuranceApp.Models.Policy

@{
    ViewData["Title"] = "Add Policy";
}

<h2 class="mb-4">Add New Policy</h2>

<form method="post">
    <!-- Policy Number Field -->
    <div class="form-group">
        <label for="PolicyNumber">Policy Number</label>
        <input type="text" class="form-control @((ViewData.ModelState["PolicyNumber"]?.Errors.Count > 0) ? "is-invalid" : "")" id="PolicyNumber" name="PolicyNumber" required minlength="10" maxlength="15" value="@Model.PolicyNumber">
        @Html.ValidationMessageFor(model => model.PolicyNumber, "", new { @class = "text-danger" })
    </div>

    <!-- Policy Amount Field -->
    <div class="form-group">
        <label for="PolicyAmount">Policy Amount</label>
        <input type="number" class="form-control @((ViewData.ModelState["PolicyAmount"]?.Errors.Count > 0) ? "is-invalid" : "")" id="PolicyAmount" name="PolicyAmount" required min="0.01" step="0.01" value="@Model.PolicyAmount" placeholder="Enter amount...">
        @Html.ValidationMessageFor(model => model.PolicyAmount, "", new { @class = "text-danger" })
    </div>

    <!-- Hidden input for PartnerId -->
    <input type="hidden" name="PartnerId" value="@ViewBag.PartnerId" />

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary mt-3">Save Policy</button>
</form>

<!-- Validation Summary -->
@Html.ValidationSummary(true, "", new { @class = "text-danger mt-3" })

<!-- Custom Styling and Script for hiding '0' in PolicyAmount field -->
<style>
    /* Styling for form elements */
    .form-group label {
        font-weight: bold;
        color: #495057;
    }

    .form-control {
        border-radius: 8px;
        padding: 10px;
        font-size: 14px;
    }

    .btn-primary {
        border-radius: 5px;
        font-size: 16px;
        padding: 10px 20px;
    }

    .btn-primary:hover {
        background-color: #0056b3;
    }

    .text-danger {
        font-size: 0.875rem;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var policyAmountInput = document.getElementById('PolicyAmount');
        // Hide 0 if it is the default value
        if (policyAmountInput && policyAmountInput.value == '0') {
            policyAmountInput.value = ''; // Set to empty string to hide 0
        }
    });
</script>
